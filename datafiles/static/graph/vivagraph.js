!function(S){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=S();else if("function"==typeof define&&define.amd)define([],S);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self);e.Viva=S()}}(function(){return function e(g,l,d){function m(a,c){if(!l[a]){if(!g[a]){var f="function"==typeof require&&require;if(!c&&f)return f(a,!0);if(b)return b(a,!0);f=Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",
f;}f=l[a]={exports:{}};g[a][0].call(f.exports,function(f){var c=g[a][1][f];return m(c?c:f)},f,f.exports,e,g,l,d)}return l[a].exports}for(var b="function"==typeof require&&require,c=0;c<d.length;c++)m(d[c]);return m}({1:[function(e,g,l){var d=e("ngraph.random");l={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return d.randomIterator.apply(d,arguments)},random:function(){return d.random.apply(d,arguments)},events:e("ngraph.events")};l.Graph={version:e("./version.js"),
graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},
Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:e("ngraph.forcelayout"),constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),
webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it");},svgNodeFactory:function(){throw Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it");
},community:function(){throw Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module");}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")};g.exports=l},{"./Algorithms/centrality.js":32,"./Algorithms/operations.js":33,"./Input/domInputManager.js":34,"./Input/dragndrop.js":35,"./Input/webglInputManager.js":36,"./Layout/constant.js":37,"./Utils/backwardCompatibleEvents.js":38,"./Utils/browserInfo.js":39,
"./Utils/findElementPosition.js":41,"./Utils/getDimensions.js":42,"./Utils/intersectRect.js":43,"./Utils/rect.js":45,"./Utils/timer.js":46,"./View/renderer.js":48,"./View/svgGraphics.js":49,"./View/webglGraphics.js":50,"./WebGL/parseColor.js":51,"./WebGL/texture.js":52,"./WebGL/webgl.js":53,"./WebGL/webglAtlas.js":54,"./WebGL/webglImage.js":55,"./WebGL/webglImageNodeProgram.js":56,"./WebGL/webglInputEvents.js":57,"./WebGL/webglLine.js":58,"./WebGL/webglLinkProgram.js":59,"./WebGL/webglNodeProgram.js":60,
"./WebGL/webglSquare.js":61,"./version.js":62,gintersect:2,"ngraph.events":6,"ngraph.forcelayout":7,"ngraph.fromjson":21,"ngraph.generators":22,"ngraph.graph":23,"ngraph.merge":24,"ngraph.random":25,"ngraph.tojson":26,simplesvg:27}],2:[function(e,g,l){g.exports=function(d,m,b,c,a,p,f,h){var n,k,e,g,r,x={x:0,y:0};n=c-m;e=d-b;r=b*m-d*c;k=n*a+e*p+r;g=n*f+e*h+r;if(0!==k&&0!==g&&0<=k===4<=g)return null;k=h-p;g=a-f;a=f*p-a*h;d=k*d+g*m+a;b=k*b+g*c+a;if(0!==d&&0!==b&&0<=d===0<=b)return null;b=n*g-k*e;if(0===
b)return null;e=e*a-g*r;x.x=(0>e?e-0:e+0)/b;e=k*r-n*a;x.y=(0>e?e-0:e+0)/b;return x}},{}],3:[function(e,g,l){g.exports.degree=e("./src/degree.js");g.exports.betweenness=e("./src/betweenness.js")},{"./src/betweenness.js":4,"./src/degree.js":5}],4:[function(e,g,l){g.exports=function(d,m){function b(a){r[a]/=2}function c(a){e[a.id]=0}function a(a){function c(a){a=a.id;-1===n[a]&&(n[a]=n[b]+1,p.push(a));n[a]===n[b]+1&&(k[a]+=k[b],h[a].push(b))}d.forEachNode(function(a){a=a.id;h[a]=[];n[a]=-1;k[a]=0});
n[a]=0;k[a]=1;for(p.push(a);p.length;){var b=p.shift();Object.create(null);f.push(b);d.forEachLinkedNode(b,c,m)}}var p=[],f=[],h=Object.create(null),n=Object.create(null),k=Object.create(null),e=Object.create(null),g,r=Object.create(null);d.forEachNode(function(a){r[a.id]=0});d.forEachNode(function(b){g=b.id;a(g);for(d.forEachNode(c);f.length;){b=f.pop();for(var p=(1+e[b])/k[b],t=h[b],n=0;n<t.length;++n){var m=t[n];e[m]+=k[m]*p}b!==g&&(r[b]+=e[b])}});m||Object.keys(r).forEach(b);return r}},{}],5:[function(e,
g,l){function d(b,a){for(var p=0,f=0;f<b.length;f+=1)p+=b[f].toId===a?1:0;return p}function m(b,a){for(var p=0,f=0;f<b.length;f+=1)p+=b[f].fromId===a?1:0;return p}function b(b){return b.length}g.exports=function(c,a){var p,f=Object.create(null);a=(a||"both").toLowerCase();if("both"===a||"inout"===a)p=b;else if("in"===a)p=d;else if("out"===a)p=m;else throw Error("Expected centrality degree kind is: in, out or both");c.forEachNode(function(a){var b=c.getLinks(a.id);f[a.id]=p(b,a.id)});return f}},{}],
6:[function(e,g,l){function d(d){var b=Object.create(null);return{on:function(c,a,p){if("function"!==typeof a)throw Error("callback is expected to be a function");var f=b[c];f||(f=b[c]=[]);f.push({callback:a,ctx:p});return d},off:function(c,a){if("undefined"===typeof c)return b=Object.create(null),d;if(b[c])if("function"!==typeof a)delete b[c];else for(var p=b[c],f=0;f<p.length;++f)p[f].callback===a&&p.splice(f,1);return d},fire:function(c){var a=b[c];if(!a)return d;var p;1<arguments.length&&(p=Array.prototype.splice.call(arguments,
1));for(var f=0;f<a.length;++f){var h=a[f];h.callback.apply(h.ctx,p)}return d}}}g.exports=function(m){if(!m)throw Error("Eventify cannot use falsy object as events subject");for(var b=["on","fire","off"],c=0;c<b.length;++c)if(m.hasOwnProperty(b[c]))throw Error("Subject cannot be eventified, since it already has property '"+b[c]+"'");b=d(m);m.on=b.on;m.off=b.off;m.fire=b.fire;return m}},{}],7:[function(e,g,l){function d(){}g.exports=function(m,b){function c(b){for(var c=0;c<b.length;++c){var h=b[c];
if("add"===h.changeType)h.node&&a(h.node.id),h.link&&p(h.link);else if("remove"===h.changeType){if(h.node){var d=h.node.id,e=k[d];e&&(k[d]=null,delete k[d],n.removeBody(e))}if(h.link&&(h=h.link,d=g[h.id])){var e=m.getNode(h.fromId),A=m.getNode(h.toId);e&&f(e.id);A&&f(A.id);delete g[h.id];n.removeSpring(d)}}}}function a(a){var b=k[a];if(!b){var c=m.getNode(a);if(!c)throw Error("initBody() was called with unknown node id");b=c.position;if(!b){b=[];if(c.links)for(var h=Math.min(c.links.length,2),p=0;p<
h;++p){var d=c.links[p];(d=d.fromId!==c.id?k[d.fromId]:k[d.toId])&&d.pos&&b.push(d)}b=n.getBestNewBodyPosition(b)}b=n.addBodyAt(b);k[a]=b;f(a);c&&(c.isPinned||c.data&&c.data.isPinned)&&(b.isPinned=!0)}}function p(a){f(a.fromId);f(a.toId);var b=n.addSpring(k[a.fromId],k[a.toId],a.length);q(a,b);g[a.id]=b}function f(a){k[a].mass=1+m.getLinks(a).length/3}function h(b){var c=k[b];c||(a(b),c=k[b]);return c}if(!m)throw Error("Graph structure cannot be undefined");var n=e("ngraph.physics.simulator")(b),
k="function"===typeof Object.create?Object.create(null):{},g={},q=n.settings.springTransform||d;(function(){m.forEachNode(function(b){a(b.id)});m.forEachLink(p)})();m.on("changed",c);return{step:function(){return n.step()},getNodePosition:function(a){return h(a).pos},setNodePosition:function(a){var b=h(a);b.setPosition.apply(b,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(a){if(a=g[a])return{from:a.from.pos,to:a.to.pos}},getGraphRect:function(){return n.getBBox()},pinNode:function(a,
b){h(a.id).isPinned=!!b},isNodePinned:function(a){return h(a.id).isPinned},dispose:function(){m.off("changed",c)},getBody:function(a){return k[a]},getSpring:function(a,b){var c;if(void 0===b)c="string"===typeof a?a:a.id;else{c=m.hasLink(a,b);if(!c)return;c=c.id}return g[c]},simulator:n}};g.exports.simulator=e("ngraph.physics.simulator")},{"ngraph.physics.simulator":8}],8:[function(e,g,l){g.exports=function(d){var m=e("./lib/spring"),b=e("ngraph.expose");d=e("ngraph.merge")(d,{springLength:30,springCoeff:8E-4,
gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var c=d.createQuadTree||e("ngraph.quadtreebh"),a=d.createBounds||e("./lib/bounds"),p=d.createDragForce||e("./lib/dragForce"),f=d.createSpringForce||e("./lib/springForce"),h=d.integrator||e("./lib/eulerIntegrator"),n=d.createBody||e("./lib/createBody"),k=[],g=[],q=c(d),r=a(k,d),x=f(d),y=p(d),c={bodies:k,springs:g,settings:d,step:function(){var a,b=k.length;if(b)for(q.insertBodies(k);b--;)a=k[b],a.isPinned||(a.force.reset(),q.updateBodyForce(a),
y.update(a));for(b=g.length;b--;)x.update(g[b]);a=h(k,d.timeStep);r.update();return a<d.stableThreshold},addBody:function(a){if(!a)throw Error("Body is required");k.push(a);return a},addBodyAt:function(a){if(!a)throw Error("Body position is required");a=n(a);k.push(a);return a},removeBody:function(a){if(a&&(a=k.indexOf(a),!(0>a)))return k.splice(a,1),0===k.length&&r.reset(),!0},addSpring:function(a,b,c,f,h){if(!a||!b)throw Error("Cannot add null spring to force simulator");"number"!==typeof c&&(c=
-1);a=new m(a,b,c,0<=h?h:-1,f);g.push(a);return a},removeSpring:function(a){if(a&&(a=g.indexOf(a),-1<a))return g.splice(a,1),!0},getBestNewBodyPosition:function(a){return r.getBestNewPosition(a)},getBBox:function(){return r.box},gravity:function(a){return void 0!==a?(d.gravity=a,q.options({gravity:a}),this):d.gravity},theta:function(a){return void 0!==a?(d.theta=a,q.options({theta:a}),this):d.theta}};b(d,c);return c}},{"./lib/bounds":9,"./lib/createBody":10,"./lib/dragForce":11,"./lib/eulerIntegrator":12,
"./lib/spring":13,"./lib/springForce":14,"ngraph.expose":15,"ngraph.merge":24,"ngraph.quadtreebh":17}],9:[function(e,g,l){g.exports=function(d,m){var b=e("ngraph.random").random(42),c={x1:0,y1:0,x2:0,y2:0};return{box:c,update:function(){var a=d.length;if(0!==a){for(var b=Number.MAX_VALUE,f=Number.MAX_VALUE,h=Number.MIN_VALUE,n=Number.MIN_VALUE;a--;){var k=d[a];k.isPinned?(k.pos.x=k.prevPos.x,k.pos.y=k.prevPos.y):(k.prevPos.x=k.pos.x,k.prevPos.y=k.pos.y);k.pos.x<b&&(b=k.pos.x);k.pos.x>h&&(h=k.pos.x);
k.pos.y<f&&(f=k.pos.y);k.pos.y>n&&(n=k.pos.y)}c.x1=b;c.x2=h;c.y1=f;c.y2=n}},reset:function(){c.x1=c.y1=0;c.x2=c.y2=0},getBestNewPosition:function(a){var p=0,f=0;if(a.length){for(var h=0;h<a.length;++h)p+=a[h].pos.x,f+=a[h].pos.y;p/=a.length;f/=a.length}else p=(c.x1+c.x2)/2,f=(c.y1+c.y2)/2;a=m.springLength;return{x:p+b.next(a)-a/2,y:f+b.next(a)-a/2}}}}},{"ngraph.random":25}],10:[function(e,g,l){var d=e("ngraph.physics.primitives");g.exports=function(m){return new d.Body(m)}},{"ngraph.physics.primitives":16}],
11:[function(e,g,l){g.exports=function(d){var m=e("ngraph.merge"),b=e("ngraph.expose");d=m(d,{dragCoeff:.02});m={update:function(b){b.force.x-=d.dragCoeff*b.velocity.x;b.force.y-=d.dragCoeff*b.velocity.y}};b(d,m,["dragCoeff"]);return m}},{"ngraph.expose":15,"ngraph.merge":24}],12:[function(e,g,l){g.exports=function(d,m){var b,c=0,a,p=0,f,h=d.length;for(f=0;f<h;++f){var n=d[f];b=m/n.mass;n.velocity.x+=b*n.force.x;n.velocity.y+=b*n.force.y;b=n.velocity.x;a=n.velocity.y;var k=Math.sqrt(b*b+a*a);1<k&&
(n.velocity.x=b/k,n.velocity.y=a/k);b=m*n.velocity.x;a=m*n.velocity.y;n.pos.x+=b;n.pos.y+=a;c+=Math.abs(b);p+=Math.abs(a)}return(c*c+p*p)/d.length}},{}],13:[function(e,g,l){g.exports=function(d,m,b,c,a){this.from=d;this.to=m;this.length=b;this.coeff=c;this.weight="number"===typeof a?a:1}},{}],14:[function(e,g,l){g.exports=function(d){var m=e("ngraph.merge"),b=e("ngraph.random").random(42),c=e("ngraph.expose");d=m(d,{springCoeff:2E-4,springLength:80});m={update:function(a){var c=a.from,f=a.to,h=0>
a.length?d.springLength:a.length,n=f.pos.x-c.pos.x,k=f.pos.y-c.pos.y,m=Math.sqrt(n*n+k*k);0===m&&(n=(b.nextDouble()-.5)/50,k=(b.nextDouble()-.5)/50,m=Math.sqrt(n*n+k*k));a=(!a.coeff||0>a.coeff?d.springCoeff:a.coeff)*(m-h)/m*a.weight;c.force.x+=a*n;c.force.y+=a*k;f.force.x-=a*n;f.force.y-=a*k}};c(d,m,["springCoeff","springLength"]);return m}},{"ngraph.expose":15,"ngraph.merge":24,"ngraph.random":25}],15:[function(e,g,l){function d(d,b,c){d.hasOwnProperty(c)&&"function"!==typeof b[c]&&(b[c]=function(a){return void 0!==
a?(d[c]=a,b):d[c]})}g.exports=function(m,b,c){if("[object Array]"===Object.prototype.toString.call(c))for(var a=0;a<c.length;++a)d(m,b,c[a]);else for(a in m)d(m,b,a)}},{}],16:[function(e,g,l){function d(a,b){this.pos=new m(a,b);this.prevPos=new m(a,b);this.force=new m;this.velocity=new m;this.mass=1}function m(a,b){a&&"number"!==typeof a?(this.x="number"===typeof a.x?a.x:0,this.y="number"===typeof a.y?a.y:0):(this.x="number"===typeof a?a:0,this.y="number"===typeof b?b:0)}function b(a,b,f){this.pos=
new c(a,b,f);this.prevPos=new c(a,b,f);this.force=new c;this.velocity=new c;this.mass=1}function c(a,b,c){a&&"number"!==typeof a?(this.x="number"===typeof a.x?a.x:0,this.y="number"===typeof a.y?a.y:0,this.z="number"===typeof a.z?a.z:0):(this.x="number"===typeof a?a:0,this.y="number"===typeof b?b:0,this.z="number"===typeof c?c:0)}g.exports={Body:d,Vector2d:m,Body3d:b,Vector3d:c};d.prototype.setPosition=function(a,b){this.prevPos.x=this.pos.x=a;this.prevPos.y=this.pos.y=b};m.prototype.reset=function(){this.x=
this.y=0};b.prototype.setPosition=function(a,b,c){this.prevPos.x=this.pos.x=a;this.prevPos.y=this.pos.y=b;this.prevPos.z=this.pos.z=c};c.prototype.reset=function(){this.x=this.y=this.z=0}},{}],17:[function(e,g,l){g.exports=function(d){d=d||{};d.gravity="number"===typeof d.gravity?d.gravity:-1;d.theta="number"===typeof d.theta?d.theta:.8;var m=e("ngraph.random").random(1984),b=e("./node"),c=e("./insertStack"),a=e("./isSamePosition"),p=d.gravity,f=[],h=new c,n=d.theta,k=[],g=0,q=function(){var a=k[g];
a?(a.quad0=null,a.quad1=null,a.quad2=null,a.quad3=null,a.body=null,a.mass=a.massX=a.massY=0,a.left=a.right=a.top=a.bottom=0):(a=new b,k[g]=a);++g;return a},r=q();return{insertBodies:function(b){var c=Number.MAX_VALUE,f=Number.MAX_VALUE,d=Number.MIN_VALUE,k=Number.MIN_VALUE,p,n=b.length;for(p=n;p--;){var e=b[p].pos.x,l=b[p].pos.y;e<c&&(c=e);e>d&&(d=e);l<f&&(f=l);l>k&&(k=l)}p=d-c;e=k-f;p>e?k=f+p:d=c+e;g=0;r=q();r.left=c;r.right=d;r.top=f;r.bottom=k;p=n-1;0<p&&(r.body=b[p]);for(;p--;)a:for(c=b[p],h.reset(),
h.push(r,c);!h.isEmpty();)if(f=h.pop(),c=f.node,f=f.body,c.body){d=c.body;c.body=null;if(a(d.pos,f.pos)){k=3;do n=m.nextDouble(),e=(c.bottom-c.top)*n,d.pos.x=c.left+(c.right-c.left)*n,d.pos.y=c.top+e,--k;while(0<k&&a(d.pos,f.pos));if(0===k&&a(d.pos,f.pos))break a}h.push(c,d);h.push(c,f)}else{var D=f.pos.x,v=f.pos.y;c.mass+=f.mass;c.massX+=f.mass*D;c.massY+=f.mass*v;d=0;k=c.left;n=(c.right+k)/2;e=c.top;l=(c.bottom+e)/2;D>n&&(d+=1,D=k,k=n,n+=n-D);v>l&&(d+=2,v=e,e=l,l+=l-v);(v=0===d?c.quad0:1===d?c.quad1:
2===d?c.quad2:3===d?c.quad3:null)?h.push(v,f):(v=q(),v.left=k,v.top=e,v.right=n,v.bottom=l,v.body=f,f=d,d=v,0===f?c.quad0=d:1===f?c.quad1=d:2===f?c.quad2=d:3===f&&(c.quad3=d))}},updateBodyForce:function(a){var b,c,d,h,k=0,e=0,g=1,C=0,q=1;for(f[0]=r;g;){b=f[C];var l=b.body,g=g-1,C=C+1;c=l!==a;l&&c?(c=l.pos.x-a.pos.x,d=l.pos.y-a.pos.y,h=Math.sqrt(c*c+d*d),0===h&&(c=(m.nextDouble()-.5)/50,d=(m.nextDouble()-.5)/50,h=Math.sqrt(c*c+d*d)),b=p*l.mass*a.mass/(h*h*h),k+=b*c,e+=b*d):c&&(c=b.massX/b.mass-a.pos.x,
d=b.massY/b.mass-a.pos.y,h=Math.sqrt(c*c+d*d),0===h&&(c=(m.nextDouble()-.5)/50,d=(m.nextDouble()-.5)/50,h=Math.sqrt(c*c+d*d)),(b.right-b.left)/h<n?(b=p*b.mass*a.mass/(h*h*h),k+=b*c,e+=b*d):(b.quad0&&(f[q]=b.quad0,g+=1,q+=1),b.quad1&&(f[q]=b.quad1,g+=1,q+=1),b.quad2&&(f[q]=b.quad2,g+=1,q+=1),b.quad3&&(f[q]=b.quad3,g+=1,q+=1)))}a.force.x+=k;a.force.y+=e},options:function(a){return a?("number"===typeof a.gravity&&(p=a.gravity),"number"===typeof a.theta&&(n=a.theta),this):{gravity:p,theta:n}}}}},{"./insertStack":18,
"./isSamePosition":19,"./node":20,"ngraph.random":25}],18:[function(e,g,l){function d(){this.stack=[];this.popIdx=0}function m(b,c){this.node=b;this.body=c}g.exports=d;d.prototype={isEmpty:function(){return 0===this.popIdx},push:function(b,c){var a=this.stack[this.popIdx];a?(a.node=b,a.body=c):this.stack[this.popIdx]=new m(b,c);++this.popIdx},pop:function(){if(0<this.popIdx)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],19:[function(e,g,l){g.exports=function(d,e){var b=Math.abs(d.y-
e.y);return 1E-8>Math.abs(d.x-e.x)&&1E-8>b}},{}],20:[function(e,g,l){g.exports=function(){this.quad3=this.quad2=this.quad1=this.quad0=this.body=null;this.right=this.bottom=this.top=this.left=this.massY=this.massX=this.mass=0}},{}],21:[function(e,g,l){function d(b){return b}g.exports=function(b,c,a){c=c||d;a=a||d;b="string"===typeof b?JSON.parse(b):b;var p=m(),f;if(void 0===b.links||void 0===b.nodes)throw Error("Cannot load graph without links and nodes");for(f=0;f<b.nodes.length;++f){var h=c(b.nodes[f]);
if(!h.hasOwnProperty("id"))throw Error("Graph node format is invalid: Node id is missing");p.addNode(h.id,h.data)}for(f=0;f<b.links.length;++f){c=a(b.links[f]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw Error("Graph link format is invalid. Both fromId and toId are required");p.addLink(c.fromId,c.toId,c.data)}return p};var m=e("ngraph.graph")},{"ngraph.graph":23}],22:[function(e,g,l){function d(b){if(!b||0>b)throw Error("Invalid number of nodes");var c=m(),a;for(a=0;a<b-1;++a)c.addLink(a,
a+1),c.addLink(b+a,b+a+1),c.addLink(a,b+a);c.addLink(b-1,2*b-1);return c}g.exports={ladder:d,complete:function(b){if(!b||1>b)throw Error("At least two nodes are expected for complete graph");var c=m(),a,d;for(a=0;a<b;++a)for(d=a+1;d<b;++d)a!==d&&c.addLink(a,d);return c},completeBipartite:function(b,c){if(!b||!c||0>b||0>c)throw Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var a=m(),d,f;for(d=0;d<b;++d)for(f=b;f<b+c;++f)a.addLink(d,f);return a},balancedBinTree:function(b){if(0>
b)throw Error("Invalid number of nodes in balanced tree");var c=m(),a=Math.pow(2,b);0===b&&c.addNode(1);for(b=1;b<a;++b){var d=b,f=2*d+1;c.addLink(d,2*d);c.addLink(d,f)}return c},path:function(b){if(!b||0>b)throw Error("Invalid number of nodes");var c=m(),a;c.addNode(0);for(a=1;a<b;++a)c.addLink(a-1,a);return c},circularLadder:function(b){if(!b||0>b)throw Error("Invalid number of nodes");var c=d(b);c.addLink(0,b-1);c.addLink(b,2*b-1);return c},grid:function(b,c){if(1>b||1>c)throw Error("Invalid number of nodes in grid graph");
var a=m(),d,f;if(1===b&&1===c)return a.addNode(0),a;for(d=0;d<b;++d)for(f=0;f<c;++f){var h=d+f*b;0<d&&a.addLink(h,d-1+f*b);0<f&&a.addLink(h,d+(f-1)*b)}return a},grid3:function(b,c,a){if(1>b||1>c||1>a)throw Error("Invalid number of nodes in grid3 graph");var d=m(),f,h,n;if(1===b&&1===c&&1===a)return d.addNode(0),d;for(n=0;n<a;++n)for(f=0;f<b;++f)for(h=0;h<c;++h){var k=n*b*c,e=f+h*b+k;0<f&&d.addLink(e,f-1+h*b+k);0<h&&d.addLink(e,f+(h-1)*b+k);0<n&&d.addLink(e,f+h*b+(n-1)*b*c)}return d},noLinks:function(b){if(0>
b)throw Error("Number of nodes shoul be >= 0");var c=m(),a;for(a=0;a<b;++a)c.addNode(a);return c},wattsStrogatz:function(b,c,a,d){if(c>=b)throw Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");d=e("ngraph.random").random(d||42);var f=m(),h,n;for(h=0;h<b;++h)f.addNode(h);c=Math.floor(c/2+1);for(var k=1;k<c;++k)for(h=0;h<b;++h)n=(k+h)%b,f.addLink(h,n);for(k=1;k<c;++k)for(h=0;h<b;++h)if(d.nextDouble()<a){var g=h;n=(k+h)%b;var q=d.next(b),r=q===g||f.hasLink(g,q);if(!r||f.getLinks(g).length!==
b-1){for(;r;)q=d.next(b),r=q===g||f.hasLink(g,q);n=f.hasLink(g,n);f.removeLink(n);f.addLink(g,q)}}return f}};var m=e("ngraph.graph")},{"ngraph.graph":23,"ngraph.random":25}],23:[function(e,g,l){function d(a,b){if(b.indexOf)return b.indexOf(a);var c=b.length,d;for(d=0;d<c;d+=1)if(b[d]===a)return d;return-1}function m(a){this.id=a;this.links=[];this.data=null}function b(a,b,c,d){this.fromId=a;this.toId=b;this.data=c;this.id=d}g.exports=function(a){function e(a,b){E.push({link:a,changeType:b})}function f(a,
b){E.push({node:a,changeType:b})}function h(a,b){if(void 0===a)throw Error("Invalid node identifier");G();var c=u[a];c?I(c,"update"):(c=new m(a),H++,I(c,"add"));c.data=b;u[a]=c;L();return c}function n(a){var b=u[a];if(!b)return!1;for(G();b.links.length;)q(b.links[0]);delete u[a];H--;I(b,"remove");L();return!0}function k(a,c,d){return new b(a,c,d,a.toString()+c.toString())}function g(a,c,d){var f=a.toString()+"\ud83d\udc49 "+c.toString(),h=F.hasOwnProperty(f);if(h||r(a,c))h||(F[f]=0),f+="@"+ ++F[f];
return new b(a,c,d,f)}function q(a){if(!a)return!1;var b=d(a,B);if(0>b)return!1;G();B.splice(b,1);var c=u[a.fromId],f=u[a.toId];c&&(b=d(a,c.links),0<=b&&c.links.splice(b,1));f&&(b=d(a,f.links),0<=b&&f.links.splice(b,1));M(a,"remove");L();return!0}function r(a,b){var c=u[a],d;if(!c)return null;for(d=0;d<c.links.length;++d){var f=c.links[d];if(f.fromId===a&&f.toId===b)return f}return null}function l(){}function y(){D+=1}function t(){--D;0===D&&0<E.length&&(K.fire("changed",E),E.length=0)}function z(a){if("function"===
typeof a)for(var b=Object.keys(u),c=0;c<b.length;++c)if(a(u[b[c]]))return!0}function A(a){if("function"===typeof a)for(var b in u)if(a(u[b]))return!0}a=a||{};void 0===a.uniqueLinkId&&(a.uniqueLinkId=!0);var u="function"===typeof Object.create?Object.create(null):{},B=[],F={},H=0,D=0,v=Object.keys?z:A,w=a.uniqueLinkId?g:k,E=[],M=l,I=l,G=l,L=l,K={addNode:h,addLink:function(a,b,c){G();var d=u[a]||h(a),f=u[b]||h(b);c=w(a,b,c);B.push(c);d.links.push(c);a!==b&&f.links.push(c);M(c,"add");L();return c},removeLink:q,
removeNode:n,getNode:function(a){return u[a]},getNodesCount:function(){return H},getLinksCount:function(){return B.length},getLinks:function(a){return(a=u[a])?a.links:null},forEachNode:v,forEachLinkedNode:function(a,b,c){var d=u[a];if(d&&d.links&&"function"===typeof b){if(c){a:{c=d.links;for(var f,d=0;d<c.length;++d)if(f=c[d],f.fromId===a&&(f=b(u[f.toId],f))){a=!0;break a}a=void 0}return a}a:{c=d.links;for(d=0;d<c.length;++d)if(f=c[d],f=b(u[f.fromId===a?f.toId:f.fromId],f)){a=!0;break a}a=void 0}return a}},
forEachLink:function(a){var b,c;if("function"===typeof a)for(b=0,c=B.length;b<c;++b)a(B[b])},beginUpdate:G,endUpdate:L,clear:function(){G();v(function(a){n(a.id)});L()},hasLink:r,getLink:r};c(K);(function(){var a=K.on;K.on=function(){K.beginUpdate=G=y;K.endUpdate=L=t;M=e;I=f;K.on=a;return a.apply(K,arguments)}})();return K};var c=e("ngraph.events")},{"ngraph.events":6}],24:[function(e,g,l){function d(e,b){var c;e||(e={});if(b)for(c in b)if(b.hasOwnProperty(c)){var a=e.hasOwnProperty(c),p=typeof b[c];
a&&typeof e[c]===p?"object"===p&&(e[c]=d(e[c],b[c])):e[c]=b[c]}return e}g.exports=d},{}],25:[function(e,g,l){function d(d){var b="number"===typeof d?d:+new Date,c=function(){b=b+2127912214+(b<<12)&4294967295;b=(b^3345072700^b>>>19)&4294967295;b=b+374761393+(b<<5)&4294967295;b=(b+3550635116^b<<9)&4294967295;b=b+4251993797+(b<<3)&4294967295;b=(b^3042594569^b>>>16)&4294967295;return(b&268435455)/268435456};return{next:function(a){return Math.floor(c()*a)},nextDouble:function(){return c()}}}g.exports=
{random:d,randomIterator:function(e,b){var c=b||d();if("function"!==typeof c.next)throw Error("customRandom does not match expected API: next() function is missing");return{forEach:function(a){var b,d,h;for(b=e.length-1;0<b;--b)d=c.next(b+1),h=e[d],e[d]=e[b],e[b]=h,a(h);e.length&&a(e[0])},shuffle:function(){var a,b,d;for(a=e.length-1;0<a;--a)b=c.next(a+1),d=e[b],e[b]=e[a],e[a]=d;return e}}}}},{}],26:[function(e,g,l){g.exports=function(d,e,b){function c(a){var b={id:a.id};void 0!==a.data&&(b.data=
a.data);return b}function a(a){var b={fromId:a.fromId,toId:a.toId};void 0!==a.data&&(b.data=a.data);return b}var p={nodes:[],links:[]},f=e||c,h=b||a;d.forEachNode(function(a){p.nodes.push(f(a))});d.forEachLink(function(a){p.links.push(h(a))});return JSON.stringify(p)}},{}],27:[function(e,g,l){function d(a,b){var c=m(a);if(void 0===b)return c;for(var d=Object.keys(b),e=0;e<d.length;++e){var p=d[e],g=b[p];"link"===p?c.link(g):c.attr(p,g)}return c}function m(f){var h=f;if("string"===typeof f)h=window.document.createElementNS(a,
f);else if(f.simplesvg)return f;var e;h.simplesvg=!0;h.attr=function(a,b){return 2===arguments.length?(null!==b?h.setAttributeNS(null,a,b):h.removeAttributeNS(null,a),h):h.getAttributeNS(null,a)};h.append=function(a){a=d(a);h.appendChild(a);return a};h.link=function(a){return arguments.length?(h.setAttributeNS(p,"xlink:href",a),h):h.getAttributeNS(p,"xlink:href")};h.text=function(a){return void 0!==a?(h.textContent=a,h):h.textContent};h.on=function(a,b,d){c.addEventListener(h,a,b,d);return h};h.off=
function(a,b,d){c.removeEventListener(h,a,b,d);return h};h.dataSource=function(a){e||(e=b(h));e.link(a);return h};return h}g.exports=d;d.compile=e("./lib/compile");var b=d.compileTemplate=e("./lib/compile_template"),c=e("add-event-listener"),a="http://www.w3.org/2000/svg",p="http://www.w3.org/1999/xlink"},{"./lib/compile":28,"./lib/compile_template":29,"add-event-listener":31}],28:[function(e,g,l){var d=e("./domparser.js"),m=e("../");g.exports=function(b){try{var c=b;if(c){var a=c.match(/^<\w+/);
if(a){var e=a[0].length;b=c.substr(0,e)+' xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" '+c.substr(e)}else throw Error("Cannot parse input text: invalid xml?");}else b=void 0;return m(d.parseFromString(b,"text/xml").documentElement)}catch(f){throw f;}}},{"../":27,"./domparser.js":30}],29:[function(e,g,l){function d(a,c){var f=a.nodeType;if(1===f||3===f){var h;if(a.hasChildNodes()){var e=a.childNodes;for(h=0;h<e.length;++h)d(e[h],c)}3===f&&b(a,c);if(a.attributes)for(f=a.attributes,
h=0;h<f.length;++h)m(f[h],a,c)}}function m(a,b,d){function e(a){b.setAttributeNS(null,k,a[m])}var n=a.value;if(n&&(n=n.match(c))){var k=a.localName,m=n[1];if(!(0>m.indexOf(".")))throw Error("simplesvg currently does not support nested bindings");(a=d[m])?a.push(e):a=d[m]=[e]}}function b(a,b){function d(b){a.nodeValue=b[n]}var e=a.nodeValue;if(e&&(e=e.match(c))){var n=e[1];n.indexOf(".");(e=b[n])?e.push(d):e=b[n]=[d]}}g.exports=function(a){var b=Object.create(null);d(a,b);return{link:function(a){function c(b){b(a)}
Object.keys(b).forEach(function(a){b[a].forEach(c)})}}};var c=/{{(.+?)}}/},{}],30:[function(e,g,l){function d(){throw Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg");}e="undefined"===typeof DOMParser?{parseFromString:d}:new DOMParser;g.exports=e},{}],31:[function(e,g,l){function d(d,e,n,k){p=p||(document.addEventListener?{add:m,rm:b}:{add:c,rm:a});return p.add(d,e,n,k)}function m(a,b,c,d){a.addEventListener(b,c,d)}function b(a,b,c,d){a.removeEventListener(b,
c,d)}function c(a,b,c,d){if(d)throw Error("cannot useCapture in oldIE");a.attachEvent("on"+b,c)}function a(a,b,c,d){a.detachEvent("on"+b,c)}d.removeEventListener=function(d,e,n,k){p=p||(document.addEventListener?{add:m,rm:b}:{add:c,rm:a});return p.rm(d,e,n,k)};d.addEventListener=d;g.exports=d;var p=null},{}],32:[function(e,g,l){function d(a){a=c.betweenness(a);return b(a)}function m(a,d){var f=c.degree(a,d);return b(f)}function b(a){return Object.keys(a).sort(function(b,c){return a[c]-a[b]}).map(function(b){return{key:b,
value:a[b]}})}var c=e("ngraph.centrality");g.exports=function(){return{betweennessCentrality:d,degreeCentrality:m}}},{"ngraph.centrality":3}],33:[function(e,g,l){g.exports=function(){return{density:function(d,e){var b=d.getNodesCount();return 0===b?NaN:e?d.getLinksCount()/(b*(b-1)):2*d.getLinksCount()/(b*(b-1))}}}},{}],34:[function(e,g,l){g.exports=function(e,b){var c={};return{bindDragNDrop:function(a,e){var f;if(e){f=b.getNodeUI(a.id);f=d(f);if("function"===typeof e.onStart)f.onStart(e.onStart);
if("function"===typeof e.onDrag)f.onDrag(e.onDrag);if("function"===typeof e.onStop)f.onStop(e.onStop);c[a.id]=f}else if(f=c[a.id])f.release(),delete c[a.id]}}};var d=e("./dragndrop.js")},{"./dragndrop.js":35}],35:[function(e,g,l){g.exports=function(c){var a,e,f,h,n,k,g=0,q=0,l,x=!1,y=0,t=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},z=function(a){t(a);return!1},A=function(a){a=a||window.event;var b=a.clientX,c=a.clientY;e&&e(a,{x:b-g,y:c-q});g=b;q=c},u=function(b){b=b||window.event;
if(x)return t(b),!1;if(1===b.button&&null!==window.event||0===b.button)return g=b.clientX,q=b.clientY,l=b.target||b.srcElement,a&&a(b,{x:g,y:q}),d.on("mousemove",A),d.on("mouseup",B),t(b),n=window.document.onselectstart,k=window.document.ondragstart,window.document.onselectstart=z,l.ondragstart=z,!1},B=function(a){a=a||window.event;d.off("mousemove",A);d.off("mouseup",B);window.document.onselectstart=n;l.ondragstart=k;l=null;f&&f(a)},F=function(a){if("function"===typeof h){a=a||window.event;a.preventDefault&&
a.preventDefault();a.returnValue=!1;var d,f=0,e=0;d=a||window.event;if(d.pageX||d.pageY)f=d.pageX,e=d.pageY;else if(d.clientX||d.clientY)f=d.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,e=d.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop;d=[f,e];f=b(c);h(a,a.wheelDelta?a.wheelDelta/360:a.detail/-9,{x:d[0]-f[0],y:d[1]-f[1]})}},H=function(a){!h&&a?"webkit"===m.browser?c.addEventListener("mousewheel",F,!1):c.addEventListener("DOMMouseScroll",
F,!1):h&&!a&&("webkit"===m.browser?c.removeEventListener("mousewheel",F,!1):c.removeEventListener("DOMMouseScroll",F,!1));h=a},D=function(a,b){return(a.clientX-b.clientX)*(a.clientX-b.clientX)+(a.clientY-b.clientY)*(a.clientY-b.clientY)},v=function(a){if(1===a.touches.length){t(a);var b=a.touches[0],c=b.clientX,b=b.clientY;e&&e(a,{x:c-g,y:b-q});g=c;q=b}else 2===a.touches.length&&(c=D(a.touches[0],a.touches[1]),b=0,c<y?b=-1:c>y&&(b=1),h(a,b,{x:a.touches[0].clientX,y:a.touches[0].clientY}),y=c,t(a),
a.preventDefault&&a.preventDefault())},w=function(a){x=!1;d.off("touchmove",v);d.off("touchend",w);d.off("touchcancel",w);l=null;f&&f(a)},E=function(b){if(1===b.touches.length){var c=b.touches[0];t(b);b.preventDefault&&b.preventDefault();g=c.clientX;q=c.clientY;l=b.target||b.srcElement;a&&a(b,{x:g,y:q});x||(x=!0,d.on("touchmove",v),d.on("touchend",w),d.on("touchcancel",w))}else 2===b.touches.length&&(t(b),b.preventDefault&&b.preventDefault(),y=D(b.touches[0],b.touches[1]))};c.addEventListener("mousedown",
u);c.addEventListener("touchstart",E);return{onStart:function(b){a=b;return this},onDrag:function(a){e=a;return this},onStop:function(a){f=a;return this},onScroll:function(a){H(a);return this},release:function(){c.removeEventListener("mousedown",u);c.removeEventListener("touchstart",E);d.off("mousemove",A);d.off("mouseup",B);d.off("touchmove",v);d.off("touchend",w);d.off("touchcancel",w);H(null)}}};var d=e("../Utils/documentEvents.js"),m=e("../Utils/browserInfo.js"),b=e("../Utils/findElementPosition.js")},
{"../Utils/browserInfo.js":39,"../Utils/documentEvents.js":40,"../Utils/findElementPosition.js":41}],36:[function(e,g,l){g.exports=function(e,b){var c=d(b),a=null,g={},f={x:0,y:0};c.mouseDown(function(b,d){a=b;f.x=d.clientX;f.y=d.clientY;c.mouseCapture(a);var e=g[b.id];if(e&&e.onStart)e.onStart(d,f);return!0}).mouseUp(function(b){c.releaseMouseCapture(a);a=null;if((b=g[b.id])&&b.onStop)b.onStop();return!0}).mouseMove(function(b,c){if(a){var d=g[a.id];if(d&&d.onDrag)d.onDrag(c,{x:c.clientX-f.x,y:c.clientY-
f.y});f.x=c.clientX;f.y=c.clientY;return!0}});return{bindDragNDrop:function(a,b){(g[a.id]=b)||delete g[a.id]}}};var d=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":57}],37:[function(e,g,l){g.exports=function(c,a){a=d(a,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var e=m(a.seed),f=new b(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),h={},g=function(b){return{x:e.next(a.maxX),y:e.next(a.maxY)}},k="function"===typeof Object.create?
Object.create(null):{},l=function(a){k[a.id]=g(a);a=k[a.id];a.x<f.x1&&(f.x1=a.x);a.x>f.x2&&(f.x2=a.x);a.y<f.y1&&(f.y1=a.y);a.y>f.y2&&(f.y2=a.y)},q=function(){0!==c.getNodesCount()&&(f.x1=Number.MAX_VALUE,f.y1=Number.MAX_VALUE,f.x2=Number.MIN_VALUE,f.y2=Number.MIN_VALUE,c.forEachNode(l))},r=function(a){h[a.id]=a},x=function(a){for(var b=0;b<a.length;++b){var c=a[b];c.node&&("add"===c.changeType?l(c.node):delete k[c.node.id]);c.link&&("add"===c.changeType?r(c.link):delete h[c.link.id])}};c.forEachNode(l);
c.forEachLink(r);c.on("changed",x);return{run:function(a){this.step()},step:function(){q();return!0},getGraphRect:function(){return f},dispose:function(){c.off("change",x)},isNodePinned:function(a){return!0},pinNode:function(a,b){},getNodePosition:function(a){return k[a]},getLinkPosition:function(a){a=h[a];return{from:k[a.fromId],to:k[a.toId]}},setNodePosition:function(a,b,c){if(a=k[a])a.x=b,a.y=c},placeNode:function(a){return"function"===typeof a?(g=a,q(),this):g(a)}}};var d=e("ngraph.merge"),m=
e("ngraph.random").random,b=e("../Utils/rect.js")},{"../Utils/rect.js":45,"ngraph.merge":24,"ngraph.random":25}],38:[function(e,g,l){var d=e("ngraph.events");g.exports=function(e){console.log("This method is deprecated. Please use Viva.events() instead");return e?void 0!==e.on||void 0!==e.off||void 0!==e.fire?{extend:function(){return e},on:e.on,stop:e.off}:{extend:function(){var b=d(e);b.addEventListener=b.on;return b},on:e.on,stop:e.off}:e}},{"ngraph.events":6}],39:[function(e,g,l){if("undefined"!==
typeof window&&window.hasOwnProperty("navigator")){e=window.navigator.userAgent.toLowerCase();l=/(opera)(?:.*version)?[ \/]([\w.]+)/;var d=/(msie) ([\w.]+)/,m=/(mozilla)(?:.*? rv:([\w.]+))?/;e=/(webkit)[ \/]([\w.]+)/.exec(e)||l.exec(e)||d.exec(e)||0>e.indexOf("compatible")&&m.exec(e)||[];e={browser:e[1]||"",version:e[2]||"0"}}else e={browser:"",version:"0"};g.exports=e},{}],40:[function(e,g,l){e("./nullEvents.js");g.exports={on:function(d,e){document.addEventListener(d,e)},off:function(d,e){document.removeEventListener(d,
e)}}},{"./nullEvents.js":44}],41:[function(e,g,l){g.exports=function(d){var e=0,b=0;if(d.offsetParent){do e+=d.offsetLeft,b+=d.offsetTop;while(null!==(d=d.offsetParent))}return[e,b]}},{}],42:[function(e,g,l){g.exports=function(d){if(!d)throw{message:"Cannot get dimensions of undefined container"};return{left:0,top:0,width:d.clientWidth,height:d.clientHeight}}},{}],43:[function(e,g,l){var d=e("gintersect");g.exports=function(e,b,c,a,g,f,h,n){return d(e,b,e,a,g,f,h,n)||d(e,a,c,a,g,f,h,n)||d(c,a,c,b,
g,f,h,n)||d(c,b,e,b,g,f,h,n)}},{gintersect:2}],44:[function(e,g,l){function d(){}g.exports={on:d,off:d,stop:d}},{}],45:[function(e,g,l){g.exports=function(d,e,b,c){this.x1=d||0;this.y1=e||0;this.x2=b||0;this.y2=c||0}},{}],46:[function(e,g,l){(function(d){function e(){}g.exports=function(){function b(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=h.setTimeout(function(){b(c+d)},d);a=c+d;return e}function c(a){h.clearTimeout(a)}var a=0,g=["ms","moz","webkit","o"],f,h;h="undefined"!==typeof window?
window:"undefined"!==typeof d?d:{setTimeout:e,clearTimeout:e};for(f=0;f<g.length&&!h.requestAnimationFrame;++f){var n=g[f];h.requestAnimationFrame=h[n+"RequestAnimationFrame"];h.cancelAnimationFrame=h[n+"CancelAnimationFrame"]||h[n+"CancelRequestAnimationFrame"]}h.requestAnimationFrame||(h.requestAnimationFrame=b);h.cancelAnimationFrame||(h.cancelAnimationFrame=c);return function(a){function b(){d=h.requestAnimationFrame(b);a()||c()}function c(){h.cancelAnimationFrame(d);d=0}var d;b();return{stop:c,
restart:function(){d||b()}}}}()}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],47:[function(e,g,l){e("./nullEvents.js");g.exports={on:function(d,e){window.addEventListener(d,e)},off:function(d,e){window.removeEventListener(d,e)}}},{"./nullEvents.js":44}],48:[function(e,g,l){g.exports=function(e,k){function g(a){return"string"===typeof M?0<=M.indexOf(a):"boolean"===typeof M?M:!0}function l(){w.beginRender();k.renderLinks&&w.renderLinks();
w.renderNodes();w.endRender()}function r(){O=v.step()&&!P;l();return!O}function x(a){G||(G=a?p(function(){return r()},30):p(r,30))}function y(){var a=v.getGraphRect(),b=f(E),c=(a.x2+a.x1)/2,a=(a.y2+a.y1)/2;J.offsetX=b.width/2-(c*J.scale-c);J.offsetY=b.height/2-(a*J.scale-a);w.graphCenterChanged(J.offsetX,J.offsetY);K=!1}function t(a){var b=v.getNodePosition(a.id);w.addNode(a,b)}function z(a){var b=v.getLinkPosition(a.id);w.addLink(a,b)}function A(a){if(g("node")){var b=!1;I.bindDragNDrop(a,{onStart:function(){b=
v.isNodePinned(a);v.pinNode(a,!0);P=!0;Q||(O=!1,G.restart())},onDrag:function(b,c){var d=v.getNodePosition(a.id);v.setNodePosition(a.id,d.x+c.x/J.scale,d.y+c.y/J.scale);P=!0;l()},onStop:function(){v.pinNode(a,b);P=!1}})}}function u(a){var b,c;for(b=0;b<a.length;b+=1)if(c=a[b],c.node){var d=c.node;"add"===c.changeType?(t(d),A(d),K&&y()):"remove"===c.changeType?(I.bindDragNDrop(d,null),w.releaseNode(d),0===e.getNodesCount()&&(K=!0)):"update"===c.changeType&&(I.bindDragNDrop(d,null),w.releaseNode(d),
t(d),A(d))}else if(c.link)if(d=c.link,"add"===c.changeType)k.renderLinks&&z(d);else if("remove"===c.changeType)k.renderLinks&&w.releaseLink(d);else if("update"===c.changeType)throw"Update type is not implemented. TODO: Implement me!";Q||(O=!1,G.restart())}function B(){y();r()}function F(a,b){if(!b){var c=f(E);b={x:c.width/2,y:c.height/2}}J.scale=w.scale(Math.pow(1.4,a?-.2:.2),b);l();R.fire("scale",J.scale);return J.scale}function H(){c.on("resize",B);N&&(N.release(),N=null);g("drag")&&(N=h(E),N.onDrag(function(a,
b){w.translateRel(b.x,b.y);l()}));g("scroll")&&(N||(N=h(E)),N.onScroll(function(a,b,c){F(0>b,c)}));e.forEachNode(A);e.off("changed",u);e.on("changed",u)}function D(){L=!1;e.off("changed",u);N&&(N.release(),N=null);c.off("resize",B);R.off();G.stop();e.forEachLink(function(a){k.renderLinks&&w.releaseLink(a)});e.forEachNode(function(a){I.bindDragNDrop(a,null);w.releaseNode(a)});v.dispose();w.release(E)}k=k||{};var v=k.layout,w=k.graphics,E=k.container,M=void 0!==k.interactive?k.interactive:!0,I,G,L=
!1,K=!0,O=!1,P=!1,Q=!1,J={offsetX:0,offsetY:0,scale:1},R=d({}),N;return{run:function(c){if(!L){E=E||window.document.body;v=v||m(e,{springLength:80,springCoeff:2E-4});w=w||b(e,{container:E});k.hasOwnProperty("renderLinks")||(k.renderLinks=!0);k.prerender=k.prerender||0;I=(w.inputManager||a)(e,w);if("number"===typeof k.prerender&&0<k.prerender)for(var d=0;d<k.prerender;d+=1)v.step();w.init(E);e.forEachNode(t);k.renderLinks&&e.forEachLink(z);y();H();L=!0}x(c);return this},reset:function(){w.resetScale();
y();J.scale=1},pause:function(){Q=!0;G.stop()},resume:function(){Q=!1;G.restart()},rerender:function(){l();return this},zoomOut:function(){return F(!0)},zoomIn:function(){return F(!1)},moveTo:function(a,b){w.graphCenterChanged(J.offsetX-a*J.scale,J.offsetY-b*J.scale);l()},getGraphics:function(){return w},dispose:function(){D()},on:function(a,b){R.on(a,b);return this},off:function(a,b){R.off(a,b);return this}}};var d=e("ngraph.events"),m=e("ngraph.forcelayout"),b=e("./svgGraphics.js"),c=e("../Utils/windowEvents.js"),
a=e("../Input/domInputManager.js"),p=e("../Utils/timer.js"),f=e("../Utils/getDimensions.js"),h=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":34,"../Input/dragndrop.js":35,"../Utils/getDimensions.js":42,"../Utils/timer.js":46,"../Utils/windowEvents.js":47,"./svgGraphics.js":49,"ngraph.events":6,"ngraph.forcelayout":7}],49:[function(e,g,l){g.exports=function(){var c,a,e=0,f=0,h,g=1,k={},l={},q=function(a){return d("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},r=function(a,
b){a.attr("x",b.x-5).attr("y",b.y-5)},x=function(a){return d("line").attr("stroke","#999")},y=function(a,b,c){a.attr("x1",b.x).attr("y1",b.y).attr("x2",c.x).attr("y2",c.y)},t={x:0,y:0},z={x:0,y:0},A={x:0,y:0},u=function(){c&&c.attr("transform","matrix("+g+", 0, 0,"+g+","+e+","+f+")")};a=function(){var a=d("svg");c=d("g").attr("buffered-rendering","dynamic");a.appendChild(c);return a}();var B={getNodeUI:function(a){return k[a]},getLinkUI:function(a){return l[a]},node:function(a){if("function"===typeof a)return q=
a,this},link:function(a){if("function"===typeof a)return x=a,this},placeNode:function(a){r=a;return this},placeLink:function(a){y=a;return this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(a,b){e=a;f=b;u()},inputManager:b,translateRel:function(b,d){var e=a.createSVGPoint(),f=c.getCTM(),h=a.createSVGPoint().matrixTransform(f.inverse());e.x=b;e.y=d;e=e.matrixTransform(f.inverse());e.x=(e.x-h.x)*f.a;e.y=(e.y-h.y)*f.d;f.e+=e.x;f.f+=e.y;c.attr("transform","matrix("+f.a+
", 0, 0,"+f.d+","+f.e+","+f.f+")")},scale:function(b,d){var h=a.createSVGPoint();h.x=d.x;h.y=d.y;h=h.matrixTransform(c.getCTM().inverse());h=a.createSVGMatrix().translate(h.x,h.y).scale(b).translate(-h.x,-h.y);h=c.getCTM().multiply(h);g=h.a;e=h.e;f=h.f;c.attr("transform","matrix("+h.a+", 0, 0,"+h.d+","+h.e+","+h.f+")");this.fire("rescaled");return g},resetScale:function(){g=1;c.attr("transform","matrix(1, 0, 0, 1, 0, 0)");this.fire("rescaled");return this},init:function(b){b.appendChild(a);u();"function"===
typeof h&&h(a)},release:function(b){a&&b&&b.removeChild(a)},addLink:function(a,b){var d=x(a);if(d)return d.position=b,d.link=a,l[a.id]=d,0<c.childElementCount?c.insertBefore(d,c.firstChild):c.appendChild(d),d},releaseLink:function(a){var b=l[a.id];b&&(c.removeChild(b),delete l[a.id])},addNode:function(a,b){var d=q(a);if(d)return d.position=b,d.node=a,k[a.id]=d,c.appendChild(d),d},releaseNode:function(a){var b=k[a.id];b&&(c.removeChild(b),delete k[a.id])},renderNodes:function(){for(var a in k)if(k.hasOwnProperty(a)){var b=
k[a];t.x=b.position.x;t.y=b.position.y;r(b,t,b.node)}},renderLinks:function(){for(var a in l)if(l.hasOwnProperty(a)){var b=l[a];z.x=b.position.from.x;z.y=b.position.from.y;A.x=b.position.to.x;A.y=b.position.to.y;y(b,z,A,b.link)}},getGraphicsRoot:function(b){"function"===typeof b&&(a?b(a):h=b);return a},getSvgRoot:function(){return a}};m(B);return B};var d=e("simplesvg"),m=e("ngraph.events"),b=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":34,"ngraph.events":6,simplesvg:27}],50:[function(e,
g,l){g.exports=function(e){e=f(e,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var g,k,l,q,r,x=0,y=0,t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],z,A,u=[],B=[],F,H={},D={},v=m(),w=b(),E=function(a){return c()},M=function(b){return a(3014898687)},I=function(){v.updateTransform(t);w.updateTransform(t)},G=function(){t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},L=function(){g&&k&&(q=k.width=Math.max(g.offsetWidth,1),r=k.height=Math.max(g.offsetHeight,1),l&&l.viewport(0,
0,q,r),v&&v.updateSize(q/2,r/2),w&&w.updateSize(q/2,r/2))};k=window.document.createElement("canvas");var K={getLinkUI:function(a){return D[a]},getNodeUI:function(a){return H[a]},node:function(a){if("function"===typeof a)return E=a,this},link:function(a){if("function"===typeof a)return M=a,this},placeNode:function(a){z=a;return this},placeLink:function(a){A=a;return this},inputManager:d,beginRender:function(){},endRender:function(){0<y&&v.render();0<x&&w.render()},bringLinkToFront:function(a){var b=
v.getFrontLinkId(),c;v.bringToFront(a);b>a.id&&(a=a.id,c=B[b],B[b]=B[a],B[b].id=b,B[a]=c,B[a].id=a)},graphCenterChanged:function(a,b){t[12]=2*a/q-1;t[13]=1-2*b/r;I()},addLink:function(a,b){var c=y++,d=M(a);d.id=c;d.pos=b;v.createLink(d);B[c]=d;return D[a.id]=d},addNode:function(a,b){var c=x++,d=E(a);d.id=c;d.position=b;d.node=a;w.createNode(d);u[c]=d;return H[a.id]=d},translateRel:function(a,b){t[12]+=2*t[0]*a/q/t[0];t[13]-=2*t[5]*b/r/t[5];I()},scale:function(a,b){var c=2*b.x/q-1,d=1-2*b.y/r,c=c-
t[12],d=d-t[13];t[12]+=c*(1-a);t[13]+=d*(1-a);t[0]*=a;t[5]*=a;I();this.fire("rescaled");return t[0]},resetScale:function(){G();l&&(L(),I());return this},init:function(a){var b={};e.preserveDrawingBuffer&&(b.preserveDrawingBuffer=!0);g=a;L();G();g.appendChild(k);l=k.getContext("experimental-webgl",b);if(!l)throw window.alert("Could not initialize WebGL. Seems like the browser doesn't support it."),"Could not initialize WebGL. Seems like the browser doesn't support it.";e.enableBlending&&(l.blendFunc(l.SRC_ALPHA,
l.ONE_MINUS_SRC_ALPHA),l.enable(l.BLEND));e.clearColor&&(a=e.clearColorValue,l.clearColor(a.r,a.g,a.b,a.a),this.beginRender=function(){l.clear(l.COLOR_BUFFER_BIT)});v.load(l);v.updateSize(q/2,r/2);w.load(l);w.updateSize(q/2,r/2);I();"function"===typeof F&&F(k)},release:function(a){k&&a&&a.removeChild(k)},isSupported:function(){var a=window.document.createElement("canvas");return a&&a.getContext&&a.getContext("experimental-webgl")},releaseLink:function(a){0<y&&--y;var b=D[a.id];delete D[a.id];v.removeLink(b);
a=b.id;a<y&&0!==y&&y!==a&&(b=B[y],B[a]=b,b.id=a)},releaseNode:function(a){0<x&&--x;var b=H[a.id];delete H[a.id];w.removeNode(b);a=b.id;if(a<x&&0!==x&&x!==a){var c=u[x];u[a]=c;c.id=a;w.replaceProperties(b,c)}},renderNodes:function(){for(var a={x:0,y:0},b=0;b<x;++b){var c=u[b];a.x=c.position.x;a.y=c.position.y;z&&z(c,a);w.position(c,a)}},renderLinks:function(){if(!this.omitLinksRendering)for(var a={x:0,y:0},b={x:0,y:0},c=0;c<y;++c){var d=B[c],e=d.pos.from;b.x=e.x;b.y=-e.y;e=d.pos.to;a.x=e.x;a.y=-e.y;
A&&A(d,b,a);v.position(d,b,a)}},getGraphicsRoot:function(a){"function"===typeof a&&(k?a(k):F=a);return k},setNodeProgram:function(a){if(!l&&a)w=a;else if(a)throw"Not implemented. Cannot swap shader on the fly... Yet.";},setLinkProgram:function(a){if(!l&&a)v=a;else if(a)throw"Not implemented. Cannot swap shader on the fly... Yet.";},transformClientToGraphCoordinates:function(a){a.x=2*a.x/q-1;a.y=1-2*a.y/r;a.x=(a.x-t[12])/t[0];a.y=(a.y-t[13])/t[5];a.x*=q/2;a.y*=-r/2;return a},transformGraphToClientCoordinates:function(a){a.x/=
q/2;a.y/=-r/2;a.x=a.x*t[0]+t[12];a.y=a.y*t[5]+t[13];a.x=(a.x+1)*q/2;a.y=(1-a.y)*r/2;return a},getNodeAtClientPos:function(a,b){if("function"!==typeof b)return null;this.transformClientToGraphCoordinates(a);for(var c=0;c<x;++c)if(b(u[c],a.x,a.y))return u[c].node;return null}};p(K);return K};var d=e("../Input/webglInputManager.js"),m=e("../WebGL/webglLinkProgram.js"),b=e("../WebGL/webglNodeProgram.js"),c=e("../WebGL/webglSquare.js"),a=e("../WebGL/webglLine.js"),p=e("ngraph.events"),f=e("ngraph.merge")},
{"../Input/webglInputManager.js":36,"../WebGL/webglLine.js":58,"../WebGL/webglLinkProgram.js":59,"../WebGL/webglNodeProgram.js":60,"../WebGL/webglSquare.js":61,"ngraph.events":6,"ngraph.merge":24}],51:[function(e,g,l){g.exports=function(d){var e=10414335;if("string"===typeof d&&d)if(4===d.length&&(d=d.replace(/([^#])/g,"$1$1")),9===d.length)e=parseInt(d.substr(1),16);else if(7===d.length)e=parseInt(d.substr(1),16)<<8|255;else throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+
d;else"number"===typeof d&&(e=d);return e}},{}],52:[function(e,g,l){g.exports=function(d){this.canvas=window.document.createElement("canvas");this.ctx=this.canvas.getContext("2d");this.isDirty=!1;this.canvas.width=this.canvas.height=d}},{}],53:[function(e,g,l){function d(b,c,a,d){for(var e=0;e<d;++e)b[c+e]=b[a+e]}function m(b,c,a,d){for(var e=0;e<d;++e){var h=b[c+e];b[c+e]=b[a+e];b[a+e]=h}}g.exports=function(b){function c(a,c){var d=b.createShader(c);b.shaderSource(d,a);b.compileShader(d);if(!b.getShaderParameter(d,
b.COMPILE_STATUS))throw d=b.getShaderInfoLog(d),window.alert(d),d;return d}return{createProgram:function(a,d){var e=b.createProgram(),h=c(a,b.VERTEX_SHADER),g=c(d,b.FRAGMENT_SHADER);b.attachShader(e,h);b.attachShader(e,g);b.linkProgram(e);if(!b.getProgramParameter(e,b.LINK_STATUS))throw e=b.getShaderInfoLog(e),window.alert(e),e;return e},extendArray:function(a,b,c){return(b+1)*c>a.length?(b=new Float32Array(a.length*c*2),b.set(a),b):a},copyArrayPart:d,swapArrayPart:m,getLocations:function(a,c){for(var d=
{},e=0;e<c.length;++e){var g=c[e],k;if("a"===g[0]&&"_"===g[1]){k=b.getAttribLocation(a,g);if(-1===k)throw Error("Program doesn't have required attribute: "+g);d[g.slice(2)]=k}else if("u"===g[0]&&"_"===g[1]){k=b.getUniformLocation(a,g);if(null===k)throw Error("Program doesn't have required uniform: "+g);d[g.slice(2)]=k}else throw Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'");}return d},context:b}}},{}],54:[function(e,g,l){var d=e("./texture.js");
g.exports=function(e){function b(a){var b=a%e;return{textureNumber:a/e<<0,row:b/g<<0,col:b%g}}function c(){x.isDirty=!0;l=0;k=null}function a(){k&&(window.clearTimeout(k),l+=1,k=null);10<l?c():k=window.setTimeout(c,400)}var g=Math.sqrt(e||1024)<<0,f=g,h=1,n={},k,l=0,q=[],r=[];if(0!==(e&e-1))throw"Tiles per texture should be power of two.";var x={isDirty:!1,clearDirty:function(){var a;x.isDirty=!1;for(a=0;a<q.length;++a)q[a].isDirty=!1},remove:function(c){var d=n[c];if(!d)return!1;delete n[c];--h;
if(h===d.offset)return!0;c=b(d.offset);var e=b(h);q[c.textureNumber].ctx.drawImage(q[e.textureNumber].canvas,e.col*f,e.row*f,f,f,c.col*f,c.row*f,f,f);q[e.textureNumber].isDirty=!0;q[c.textureNumber].isDirty=!0;n[r[h]].offset=d.offset;r[d.offset]=r[h];a();return!0},getTextures:function(){return q},getCoordinates:function(a){return n[a]},load:function(c,e){if(n.hasOwnProperty(c))e(n[c]);else{var k=new window.Image,m=h;h+=1;k.crossOrigin="anonymous";k.onload=function(){a();var c=b(m),h={offset:m};if(c.textureNumber>=
q.length){var l=new d(g*f);q.push(l)}l=q[c.textureNumber];l.ctx.drawImage(k,c.col*f,c.row*f,f,f);r[m]=k.src;n[k.src]=h;l.isDirty=!0;e(h)};k.src=c}}};return x}},{"./texture.js":52}],55:[function(e,g,l){g.exports=function(d,e){return{_texture:0,_offset:0,size:"number"===typeof d?d:32,src:e}}},{}],56:[function(e,g,l){var d=e("./webglAtlas.js"),m=e("./webgl.js");g.exports=function(){var b,c,a,e,f,h,g=0,k=new Float32Array(64),l,q,r,x;return{load:function(g){a=g;f=m(g);b=new d(1024);c=f.createProgram("attribute vec2 a_vertexPos;\nattribute float a_customAttributes;\nuniform vec2 u_screenSize;\nuniform mat4 u_transform;\nuniform float u_tilesPerTexture;\nvarying vec3 vTextureCoord;\nvoid main(void) {\n   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);\nfloat corner = mod(a_customAttributes, 4.);\nfloat tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);\nfloat tilesPerRow = sqrt(u_tilesPerTexture);\nfloat tileSize = 1./tilesPerRow;\nfloat tileColumn = mod(tileIndex, tilesPerRow);\nfloat tileRow = floor(tileIndex/tilesPerRow);\nif(corner == 0.0) {\n  vTextureCoord.xy = vec2(0, 1);\n} else if(corner == 1.0) {\n  vTextureCoord.xy = vec2(1, 1);\n} else if(corner == 2.0) {\n  vTextureCoord.xy = vec2(0, 0);\n} else {\n  vTextureCoord.xy = vec2(1, 0);\n}\nvTextureCoord *= tileSize;\nvTextureCoord.x += tileColumn * tileSize;\nvTextureCoord.y += tileRow * tileSize;\nvTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);\n}",
"precision mediump float;\nvarying vec4 color;\nvarying vec3 vTextureCoord;\nuniform sampler2D u_sampler0;\nuniform sampler2D u_sampler1;\nuniform sampler2D u_sampler2;\nuniform sampler2D u_sampler3;\nvoid main(void) {\n   if (vTextureCoord.z == 0.) {\n     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);\n   } else if (vTextureCoord.z == 1.) {\n     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);\n   } else if (vTextureCoord.z == 2.) {\n     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);\n   } else if (vTextureCoord.z == 3.) {\n     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);\n   } else { gl_FragColor = vec4(0, 1, 0, 1); }\n}");
a.useProgram(c);h=f.getLocations(c,"a_vertexPos a_customAttributes u_screenSize u_transform u_sampler0 u_sampler1 u_sampler2 u_sampler3 u_tilesPerTexture".split(" "));a.uniform1f(h.tilesPerTexture,1024);a.enableVertexAttribArray(h.vertexPos);a.enableVertexAttribArray(h.customAttributes);e=a.createBuffer()},position:function(a,b){var c=18*a.id;k[c]=b.x-a.size;k[c+1]=b.y-a.size;k[c+2]=4*a._offset;k[c+3]=b.x+a.size;k[c+4]=b.y-a.size;k[c+5]=4*a._offset+1;k[c+6]=b.x-a.size;k[c+7]=b.y+a.size;k[c+8]=4*a._offset+
2;k[c+9]=b.x-a.size;k[c+10]=b.y+a.size;k[c+11]=4*a._offset+2;k[c+12]=b.x+a.size;k[c+13]=b.y-a.size;k[c+14]=4*a._offset+1;k[c+15]=b.x+a.size;k[c+16]=b.y+a.size;k[c+17]=4*a._offset+3},createNode:function(a){k=f.extendArray(k,g,18);g+=1;var c=b.getCoordinates(a.src);c?a._offset=c.offset:(a._offset=0,b.load(a.src,function(b){a._offset=b.offset}))},removeNode:function(a){0<g&&--g;a.id<g&&0<g&&(a.src&&b.remove(a.src),f.copyArrayPart(k,18*a.id,18*g,18))},replaceProperties:function(a,b){b._offset=a._offset},
updateTransform:function(a){x=!0;r=a},updateSize:function(a,b){l=a;q=b;x=!0},render:function(){a.useProgram(c);a.bindBuffer(a.ARRAY_BUFFER,e);a.bufferData(a.ARRAY_BUFFER,k,a.DYNAMIC_DRAW);x&&(x=!1,a.uniformMatrix4fv(h.transform,!1,r),a.uniform2f(h.screenSize,l,q));a.vertexAttribPointer(h.vertexPos,2,a.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0);a.vertexAttribPointer(h.customAttributes,1,a.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8);if(b.isDirty){var d=b.getTextures(),f;for(f=0;f<d.length;++f)if(d[f].isDirty||
!d[f].nativeObject){var m=d[f],A=f;m.nativeObject&&a.deleteTexture(m.nativeObject);var u=a.createTexture();a.activeTexture(a["TEXTURE"+A]);a.bindTexture(a.TEXTURE_2D,u);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,m.canvas);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST);a.generateMipmap(a.TEXTURE_2D);a.uniform1i(h["sampler"+A],A);m.nativeObject=u}b.clearDirty()}a.drawArrays(a.TRIANGLES,0,6*g)}}}},
{"./webgl.js":53,"./webglAtlas.js":54}],57:[function(e,g,l){var d=e("../Utils/documentEvents.js");g.exports=function(e){function b(a,b,c){if(a&&a.size){var d=a.position;a=a.size;return d.x-a<b&&b<d.x+a&&d.y-a<c&&c<d.y+a}return!0}function c(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function a(a){c(a);return!1}function g(a,b){var c,d;for(c=0;c<a.length;c+=1)if(d=a[c].apply(void 0,b))return!0}if(e.webglInputEvents)return e.webglInputEvents;var f=null,h=[],l=[],k=[],C=[],q=[],r=[],x=
[],y,t;(function(A){var u={x:0,y:0},z=null,F=1,H=+new Date,D=function(a){g(q,[z,a]);u.x=a.clientX;u.y=a.clientY},v=function(){d.off("mousemove",D);d.off("mouseup",v)},w=function(){t=A.getBoundingClientRect()};window.addEventListener("resize",w);w();A.addEventListener("mousemove",function(a){if(!f){0===F++%7&&(w(),F=1);var d=!1,k;u.x=a.clientX-t.left;u.y=a.clientY-t.top;(k=e.getNodeAtClientPos(u,b))&&z!==k?(z=k,d=d||g(h,[z])):null===k&&z!==k&&(d=d||g(l,[z]),z=null);d&&c(a)}});A.addEventListener("mousedown",
function(f){var h=!1,l;w();u.x=f.clientX-t.left;u.y=f.clientY-t.top;l=[e.getNodeAtClientPos(u,b),f];l[0]?(h=g(k,l),d.on("mousemove",D),d.on("mouseup",v),y=window.document.onselectstart,window.document.onselectstart=a,z=l[0]):z=null;h&&c(f)});A.addEventListener("mouseup",function(a){var d=+new Date,f;u.x=a.clientX-t.left;u.y=a.clientY-t.top;f=[e.getNodeAtClientPos(u,b),a];f[0]&&(window.document.onselectstart=y,400>d-H&&f[0]===z?g(x,f):g(r,f),H=d,g(C,f)&&c(a))})})(e.getGraphicsRoot());var z={mouseEnter:function(a){"function"===
typeof a&&h.push(a);return z},mouseLeave:function(a){"function"===typeof a&&l.push(a);return z},mouseDown:function(a){"function"===typeof a&&k.push(a);return z},mouseUp:function(a){"function"===typeof a&&C.push(a);return z},mouseMove:function(a){"function"===typeof a&&q.push(a);return z},click:function(a){"function"===typeof a&&r.push(a);return z},dblClick:function(a){"function"===typeof a&&x.push(a);return z},mouseCapture:function(a){f=a},releaseMouseCapture:function(){f=null}};return e.webglInputEvents=
z}},{"../Utils/documentEvents.js":40}],58:[function(e,g,l){var d=e("./parseColor.js");g.exports=function(e){return{color:d(e)}}},{"./parseColor.js":51}],59:[function(e,g,l){var d=e("./webgl.js");g.exports=function(){var e=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),b,c,a,g,f,h=0,l,k=new ArrayBuffer(16*e),C=new Float32Array(k),q=new Uint32Array(k),r,x,y,t;return{load:function(e){c=e;g=d(e);b=g.createProgram("attribute vec2 a_vertexPos;\nattribute vec4 a_color;\nuniform vec2 u_screenSize;\nuniform mat4 u_transform;\nvarying vec4 color;\nvoid main(void) {\n   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);\n   color = a_color.abgr;\n}",
"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\n   gl_FragColor = color;\n}");c.useProgram(b);f=g.getLocations(b,["a_vertexPos","a_color","u_screenSize","u_transform"]);c.enableVertexAttribArray(f.vertexPos);c.enableVertexAttribArray(f.color);a=c.createBuffer()},position:function(a,b,c){var d=6*a.id;C[d]=b.x;C[d+1]=b.y;q[d+2]=a.color;C[d+3]=c.x;C[d+4]=c.y;q[d+5]=a.color},createLink:function(a){if((h+1)*e>k.byteLength){var b=new ArrayBuffer(2*k.byteLength),c=new Float32Array(b),
d=new Uint32Array(b);d.set(q);C=c;q=d;k=b}h+=1;l=a.id},removeLink:function(a){0<h&&--h;a.id<h&&0<h&&g.copyArrayPart(q,6*a.id,6*h,6)},updateTransform:function(a){t=!0;y=a},updateSize:function(a,b){r=a;x=b;t=!0},render:function(){c.useProgram(b);c.bindBuffer(c.ARRAY_BUFFER,a);c.bufferData(c.ARRAY_BUFFER,k,c.DYNAMIC_DRAW);t&&(t=!1,c.uniformMatrix4fv(f.transform,!1,y),c.uniform2f(f.screenSize,r,x));c.vertexAttribPointer(f.vertexPos,2,c.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0);c.vertexAttribPointer(f.color,
4,c.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8);c.drawArrays(c.LINES,0,2*h);l=h-1},bringToFront:function(a){l>a.id&&g.swapArrayPart(C,6*a.id,6*l,6);0<l&&--l},getFrontLinkId:function(){return l}}}},{"./webgl.js":53}],60:[function(e,g,l){var d=e("./webgl.js");g.exports=function(){var e=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,b,c,a,g,f,h=new ArrayBuffer(16*e),l=new Float32Array(h),k=new Uint32Array(h),C=0,q,r,x,y;return{load:function(e){c=e;f=d(e);b=f.createProgram("attribute vec3 a_vertexPos;\nattribute vec4 a_color;\nuniform vec2 u_screenSize;\nuniform mat4 u_transform;\nvarying vec4 color;\nvoid main(void) {\n   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);\n   gl_PointSize = a_vertexPos.z * u_transform[0][0];\n   color = a_color.abgr;\n}",
"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\n   gl_FragColor = color;\n}");c.useProgram(b);g=f.getLocations(b,["a_vertexPos","a_color","u_screenSize","u_transform"]);c.enableVertexAttribArray(g.vertexPos);c.enableVertexAttribArray(g.color);a=c.createBuffer()},position:function(a,b){var c=a.id;l[4*c]=b.x;l[4*c+1]=-b.y;l[4*c+2]=a.size;k[4*c+3]=a.color},updateTransform:function(a){y=!0;x=a},updateSize:function(a,b){q=a;r=b;y=!0},removeNode:function(a){0<C&&--C;a.id<C&&0<C&&f.copyArrayPart(k,
4*a.id,4*C,4)},createNode:function(){if((C+1)*e>=h.byteLength){var a=new ArrayBuffer(2*h.byteLength),b=new Float32Array(a),c=new Uint32Array(a);c.set(k);l=b;k=c;h=a}C+=1},replaceProperties:function(){},render:function(){c.useProgram(b);c.bindBuffer(c.ARRAY_BUFFER,a);c.bufferData(c.ARRAY_BUFFER,h,c.DYNAMIC_DRAW);y&&(y=!1,c.uniformMatrix4fv(g.transform,!1,x),c.uniform2f(g.screenSize,q,r));c.vertexAttribPointer(g.vertexPos,3,c.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0);c.vertexAttribPointer(g.color,
4,c.UNSIGNED_BYTE,!0,4*Float32Array.BYTES_PER_ELEMENT,12);c.drawArrays(c.POINTS,0,C)}}}},{"./webgl.js":53}],61:[function(e,g,l){var d=e("./parseColor.js");g.exports=function(e,b){return{size:"number"===typeof e?e:10,color:d(b)}}},{"./parseColor.js":51}],62:[function(e,g,l){g.exports="0.8.1"},{}]},{},[1])(1)});
