<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<TITLE>HackageDB: checking and uploading packages</TITLE>
<LINK REL="stylesheet" HREF="hackage.css" TYPE="text/css">
</HEAD>

<BODY>
<DIV CLASS="header">
<H1>hackageDB :: [Package]</H1>
<TABLE CLASS="navigation">
<TR>
<TD><A HREF="/packages/hackage.html">Introduction</A></TD>
<TD><A HREF="/packages/archive/pkg-list.html">Packages</A></TD>
<TD><A HREF="/packages/archive/recent.html">What's new</A></TD>
<TD><A HREF="/packages/upload.html">Upload</A></TD>
<TD><A HREF="/packages/accounts.html">User accounts</A></TD>
</TR>
</TABLE>
</DIV>

<DIV CLASS="content">
<H2>Checking and uploading packages</H2>

<P>Packages must be in the form produced by Cabal's
<A HREF="http://www.haskell.org/ghc/docs/latest/html/Cabal/builders.html#setup-sdist">sdist</A> command:
a gzipped tar file <I>package</I>-<I>version</I><TT>.tar.gz</TT>
comprising a directory <I>package</I>-<I>version</I> containing a package
of that name and version, including <I>package</I><TT>.cabal</TT>.

<H3>Notes</H3>

<UL>
<LI>Categories are determined by whatever you put in the <TT>Category</TT> field
(there's no agreed list of category names yet).
You can have more than one category, separated by commas.

<LI>Documentation for library packages will be generated by a batch run,
though not immediately after your upload.
You don't have to do anything special to make it happen.

<LI>We have moved to Haddock 2, and expect some glitches.
If you notice anything broken, please report it on the
<A HREF="http://trac.haskell.org/haddock">Haddock bug tracker</A>.
</UL>

<H3>Checking a Cabal package</H3>

<P><STRONG CLASS="warning">Re-uploading a package with the same version
number is not permitted</STRONG>,
so you might want to do some checking before uploading:
<UL>
<LI>You could check that your source bundle builds,
including the haddock documentation if it's a library.
Some things to watch out for:
<UL>
<LI>In GHC 6.8, several modules were split from the <TT>base</TT> package
into other packages.
See <A HREF="http://www.haskell.org/haskellwiki/Upgrading_packages">these notes</A> on making packages work with a range of versions of GHC.
<LI>While <a href="http://www.haskell.org/haddock/">Haddock 2</a>
accepts GHC features, it is also more picky about comment syntax than
the old version.
</UL>

<LI>The following form checks that a package is uploadable,
warns about sundry other matters,
and presents a preview of the web page for the package.
It does not add the package to the database.

<FORM CLASS="box" action="/cgi-bin/hackage-scripts/check-pkg" method="post" enctype="multipart/form-data">
<P>Local file containing Cabal package: <INPUT type="file" name="package">
<INPUT type="submit" value="Check">
</P>
</FORM>
</UL>

<H3>Upload a Cabal package to HackageDB</H3>

<P>This form does the uploading.
When you submit it, you'll be prompted for your HackageDB
<A HREF="accounts.html">username</A> and password.
(Alternatively, there's a <A HREF="/cgi-bin/hackage-scripts/package/cabal-upload">command-line interface</A>, which also needs the same username and password.)

<FORM CLASS="box" action="/cgi-bin/hackage-scripts/protected/upload-pkg" method="post" enctype="multipart/form-data">
<P>Local file containing Cabal package: <INPUT type="file" name="package">
<INPUT type="submit" value="Upload">
</P>
</FORM>
</DIV>
</HTML>
